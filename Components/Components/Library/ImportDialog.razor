@using Zine.App.Enums
@using Zine.App.FileHelpers
<MudMessageBox @ref="mbox" Title="Import">
    <MessageContent>
        Where would you like to import comic books from?
    </MessageContent>
    <NoButton>
        <MudButton  class="mr-2" Color="Color.Primary" Variant="Variant.Filled">Directory</MudButton>
    </NoButton>
    <YesButton>
        <MudButton Color="Color.Primary" Variant="Variant.Filled">File</MudButton>
    </YesButton>
</MudMessageBox>

@code {

    private MudMessageBox mbox { get; set; }

    public async Task<(ImportType?, string)> Show()
    {
        //True = File | False = Directory
        bool? result = await mbox.Show();

        if (result == null)
            return (null, "");

        StateHasChanged();

        if ((bool)result)
        {
            string? selectedFilePath = await FileSelector.GetFilePathFromFileDialog();

            if (string.IsNullOrEmpty(selectedFilePath))
                return (null, "");

            return (ImportType.File, selectedFilePath);
        }


        string? selectedDirectoryPath = await FileSelector.GetDirectoryPathFromFileDialog();

        if (string.IsNullOrEmpty(selectedDirectoryPath))
            return (null, "");

        return (ImportType.Directory, selectedDirectoryPath);
    }
}
